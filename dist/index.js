"use strict";function e(e){return e&&"object"==typeof e&&"default"in e?e.default:e}Object.defineProperty(exports,"__esModule",{value:!0});var n=require("react"),t=e(require("prop-types")),o=require("@react-hook/window-size"),r=require("react-device-detect"),i=require("react-rnd"),a=e(require("react-textarea-autosize")),l=e(require("react-loader-spinner"));require("react-loader-spinner/dist/loader/css/react-spinner-loader.css");
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var c=function(){return(c=Object.assign||function(e){for(var n,t=1,o=arguments.length;t<o;t++)for(var r in n=arguments[t])Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r]);return e}).apply(this,arguments)};function s(e,n){var t,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:l(0),throw:l(1),return:l(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function l(i){return function(l){return function(i){if(t)throw new TypeError("Generator is already executing.");for(;a;)try{if(t=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=a.trys,(r=r.length>0&&r[r.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=n.call(e,a)}catch(e){i=[6,e],o=0}finally{t=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,l])}}}!function(e,n){void 0===n&&(n={});var t=n.insertAt;if(e&&"undefined"!=typeof document){var o=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css","top"===t&&o.firstChild?o.insertBefore(r,o.firstChild):o.appendChild(r),r.styleSheet?r.styleSheet.cssText=e:r.appendChild(document.createTextNode(e))}}('@import url("https://fonts.googleapis.com/css?family=Source+Code+Pro&display=swap");\n#index_terminalContainer__3q4m3 {\n  --control-default-bg-color: #ccc;\n  --control-close-bg-color: #fc5b57;\n  --control-minimize-bg-color: #e5bf3c;\n  --control-maximize-bg-color: #57c038; }\n\n.index_controls__9z-dM {\n  display: "block";\n  text-align: left;\n  height: 26px;\n  position: relative;\n  top: 4px;\n  margin-left: 4px; }\n  .index_controls__9z-dM .index_consoleCtrl__PQnAL {\n    display: inline-block;\n    width: 13px;\n    height: 13px;\n    margin: 0 3px;\n    border-radius: 50%;\n    background: var(--control-default-bg-color); }\n  .index_controls__9z-dM .index_close__2o6CK {\n    background: var(--control-close-bg-color); }\n  .index_controls__9z-dM .index_minimize__E9mwB {\n    background: var(--control-minimize-bg-color); }\n  .index_controls__9z-dM .index_maximize__sbbYF {\n    background: var(--control-maximize-bg-color); }\n\n.index_editor__2tqRz {\n  text-align: left;\n  height: calc(100% - 46px);\n  padding: 10px 15px;\n  overflow-wrap: break-word;\n  overflow-y: scroll;\n  outline: none;\n  font-family: "Source Code Pro", monospace;\n  font-size: 18px;\n  line-height: 22px;\n  border-bottom-left-radius: 5px;\n  border-bottom-right-radius: 5px; }\n  .index_editor__2tqRz .index_textbox__Wb3j1 {\n    font-family: "Source Code Pro", monospace;\n    font-size: 18px;\n    border: none; }\n  .index_editor__2tqRz .index_loader__3l44g {\n    text-align: center; }\n  .index_editor__2tqRz .index_mobileInput__jGtyc {\n    position: absolute;\n    top: -2000px;\n    left: -2000px; }\n  .index_editor__2tqRz .index_lineText__2Poex {\n    display: inline;\n    position: relative;\n    top: -1px;\n    margin-left: 8px; }\n  .index_editor__2tqRz .index_preWhiteSpace__3nCT2 {\n    white-space: pre; }\n  .index_editor__2tqRz .index_caret__MYxcn {\n    position: relative;\n    -webkit-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    -moz-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    -o-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    -ms-animation: index_blink__RQDX- 0.75s ease-in-out infinite;\n    animation: index_blink__RQDX- 0.75s ease-in-out infinite; }\n    .index_editor__2tqRz .index_caret__MYxcn .index_caretAfter__2B8sk {\n      content: "";\n      position: absolute;\n      top: 2px;\n      width: 10px;\n      height: 22px;\n      z-index: 10; }\n\n@-moz-keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n\n@-webkit-keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n\n@-o-keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n\n@keyframes index_blink__RQDX- {\n  0% {\n    opacity: 0;\n    -ms-filter: "progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";\n    filter: alpha(opacity=0); }\n  100% {\n    opacity: 1;\n    -ms-filter: none;\n    filter: none; } }\n  .index_editor__2tqRz a {\n    color: #1a87b5; }\n\n#index_terminalContainer__3q4m3 {\n  height: 100%; }\n\n.index_terminal__1dSq1 {\n  height: 100%;\n  width: 100%;\n  margin: auto;\n  border-radius: 5px; }\n');var u={terminalContainer:"index_terminalContainer__3q4m3",controls:"index_controls__9z-dM",consoleCtrl:"index_consoleCtrl__PQnAL",close:"index_close__2o6CK",minimize:"index_minimize__E9mwB",maximize:"index_maximize__sbbYF",editor:"index_editor__2tqRz",textbox:"index_textbox__Wb3j1",loader:"index_loader__3l44g",mobileInput:"index_mobileInput__jGtyc",lineText:"index_lineText__2Poex",preWhiteSpace:"index_preWhiteSpace__3nCT2",caret:"index_caret__MYxcn",blink:"index_blink__RQDX-",caretAfter:"index_caretAfter__2B8sk",terminal:"index_terminal__1dSq1"},m=n.createContext(null),d=function(e){var t=e.children;return n.createElement(m.Provider,{value:u},t)},f={dark:{themeBGColor:"#022833",themeToolbarColor:"#131519",themeColor:"#839496",themePromptColor:"#a917a8"},light:{themeBGColor:"#fdf6e4",themeToolbarColor:"#d8d8d8",themeColor:"#333333",themePromptColor:"#a917a8"},dracula:{themeBGColor:"#272B36",themeToolbarColor:"#DBDBDB",themeColor:"#FFFEFC",themePromptColor:"#a917a8"}},p=n.createContext(null),_=function(e){var t=e.children,o=c(c({},f),t.props.themes||{}),r=o[t.props.theme]||o.light;return n.createElement(p.Provider,{value:r},t)},x=n.createContext(null);function h(e){var t=n.useContext(x),o=t.editorInput,r=t.setEditorInput,i=n.useContext(m),a=e.showControlButtons,l=e.controlButtonLabels,c=e.maximize,s=e.minimize,u=a?l.map((function(e){return n.createElement("a",{onClick:function(){return function(e){"maximize"===e?c():"minimize"===e?s():"close"===e&&r(o+"cheese")}(e)},key:e,className:i.consoleCtrl+" "+i[e]})})):null;return n.createElement("div",{className:i.controls},u)}var b=function(e,t,o,r,i,a){var l=n.useContext(x),c=l.bufferedContent,u=l.setBufferedContent,m=n.useContext(p);n.useEffect((function(){if(t){var l,d,f,p,_;l=r,d=void 0,f=void 0,_=function(){var t;return s(this,(function(r){return""===l?(t=n.createElement(n.Fragment,null,n.createElement("span",{style:{color:m.themePromptColor}}," ",e," ")," ",n.createElement("br",null)),u(n.createElement(n.Fragment,null,c,t)),i(""),o(!1)):"clear"===l?(u(""),i(""),o(!1),a&&a(l)):(i(""),a&&a(l)),[2]}))},new((p=void 0)||(p=Promise))((function(e,n){function t(e){try{r(_.next(e))}catch(e){n(e)}}function o(e){try{r(_.throw(e))}catch(e){n(e)}}function r(n){n.done?e(n.value):new p((function(e){e(n.value)})).then(t,o)}r((_=_.apply(d,f||[])).next())}))}}),[t])},g=function(e,t,o,i,l,c){var s=n.useContext(m),u=n.useContext(p),d=n.useContext(x),f=d.editorInput,_=d.setEditorInput,h=d.appendCommandToHistory,g=n.useRef(null),C=n.useState(!1),v=C[0],y=C[1];n.useEffect((function(){r.isMobile&&t&&g.current.focus()}),[t]),n.useEffect((function(){v&&h(f)}),[v]);r.isMobile&&i&&n.createElement("div",{className:s.mobileInput},n.createElement("input",{type:"text",autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",value:f,onChange:function(e){return _(e.target.value)},ref:g}));var E=v?n.createElement(n.Fragment,null,n.createElement("div",{className:s.lineText},t&&e?n.createElement("span",{className:s.caret},n.createElement("span",{className:s.caretAfter,style:{background:u.themeColor}})):null)):n.createElement("div",{style:{flex:1,flexDirection:"row"}},n.createElement("span",{style:{color:u.themePromptColor,verticalAlign:"top"}},o),n.createElement("div",{className:s.lineText},n.createElement(a,{autoFocus:!0,autoComplete:"off",autoCorrect:"off",autoCapitalize:"off",spellCheck:"false",value:f,className:s.textbox,style:{backgroundColor:u.themeBGColor,width:"80%",color:"white",border:"none",outline:"none",resize:"none"},minRows:1,maxRows:10,onChange:function(e){return _(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&y(!0)}})));return b(o,v,y,f,_,l),function(e,t){n.useEffect((function(){t(!!e)}),[e])}(c,y),E};function C(e){var t=n.useRef(null),o=n.useContext(m),r=n.useContext(p),i=n.useContext(x).bufferedContent;!function(e,t){n.useEffect((function(){t.current.scrollTop=t.current.scrollHeight}),[e])}(i,t);var a=e.isLoading,c=e.enableInput,s=e.welcomeMessage,u=e.caret,d=e.consoleFocused,f=e.prompt,_=e.commandPassThrough,h=e.blockInput,b=g(u,d,f,c,_,h);return n.createElement("div",{ref:t,className:o.editor,style:{background:r.themeBGColor}},a?n.createElement("div",{className:o.loader},n.createElement(l,{type:"TailSpin",color:"white",width:75,height:75})):n.createElement(n.Fragment,null,s,i,b))}function v(e){var t,a,l,c,s=n.useRef(null),u=n.useState(!r.isMobile),d=u[0],f=u[1],_=n.useContext(m),x=n.useContext(p);t=s,a=d,l=f,c=function(e){t.current&&!t.current.contains(e.target)?l(!1):r.isMobile?l(!a):l(!0)},n.useEffect((function(){return document.addEventListener("mousedown",c),function(){document.removeEventListener("mousedown",c)}}));var b=e.draggable,g=e.commandPassThrough,v=e.blockInput,y=e.isLoading,E=e.caret,w=e.theme,z=e.showControlButtons,k=e.controlButtonLabels,T=e.prompt,B=e.commands,M=e.welcomeMessage,R=e.errorMessage,P=e.enableInput,I=n.createRef(),q=o.useWindowSize(),S=function(){I.current&&I.current.updateSize({width:500,height:200})},D=function(){var e=q[0],n=q[1];I.current&&I.current.updateSize({width:e,height:n})};return n.createElement(n.Fragment,null,b?n.createElement(i.Rnd,{ref:I,default:{x:150,y:205,width:500,height:200},minWidth:500,minHeight:200,bounds:"window",cancel:".cancel"},n.createElement("div",{ref:s,id:_.terminalContainer,className:""+_["theme--"+w]},n.createElement("div",{className:""+_.terminal,style:{background:x.themeToolbarColor,color:x.themeColor}},n.createElement(h,{minimize:S,maximize:D,consoleFocused:d,showControlButtons:z,controlButtonLabels:k}),n.createElement("div",{className:"cancel",style:{width:"100%",height:"100%"}},n.createElement(C,{commandPassThrough:g,blockInput:v,isLoading:y,caret:E,consoleFocused:d,prompt:T,commands:B,welcomeMessage:M,errorMessage:R,enableInput:P}))))):n.createElement("div",{ref:s,id:_.terminalContainer,className:""+_["theme--"+w]},n.createElement("div",{className:""+_.terminal,style:{background:x.themeToolbarColor,color:x.themeColor}},n.createElement(h,{minimize:S,maximize:D,consoleFocused:d,showControlButtons:z,controlButtonLabels:k}),n.createElement("div",{className:"cancel",style:{width:"100%",height:"100%"}},n.createElement(C,{commandPassThrough:g,blockInput:v,isLoading:y,caret:E,consoleFocused:d,prompt:T,commands:B,welcomeMessage:M,errorMessage:R,enableInput:P})))))}function y(e){var t=e.children;return n.createElement(d,null,n.createElement(_,null,t))}function E(e){return n.createElement(y,null,n.createElement(v,c({},e)))}v.propTypes={draggable:t.bool,commandPassThrough:t.func,blockInput:t.bool,isLoading:t.bool,enableInput:t.bool,caret:t.bool,theme:t.string,showControlButtons:t.bool,controlButtonLabels:t.arrayOf(t.string),prompt:t.string,commands:t.objectOf(t.oneOfType([t.string,t.func,t.node])),welcomeMessage:t.oneOfType([t.string,t.func,t.node]),errorMessage:t.string},v.defaultProps={draggable:!1,commandPassThrough:null,blockInput:!1,isLoading:!1,enableInput:!0,caret:!0,theme:"light",showControlButtons:!0,controlButtonLabels:["close","minimize","maximize"],prompt:">>>",commands:{},welcomeMessage:"",errorMessage:"not found!"};var w=function(e){var t=e.children,o=n.useState(""),r=o[0],i=o[1],a=n.useState(n.createElement(n.Fragment,null)),l=a[0],c=a[1],s=n.useState([]),u=s[0],m=s[1],d=n.useState(null),f=d[0],p=d[1];n.useEffect((function(){p(u.length)}),[u]);return n.createElement(x.Provider,{value:{editorInput:r,setEditorInput:i,bufferedContent:l,setBufferedContent:c,appendCommandToHistory:function(e){e&&m(u.concat(e))},getPreviousCommand:function(){if(0===f)return 0===u.length?"":u[0];var e=u[f-1];return f>0&&p(f-1),e},getNextCommand:function(){if(f+1<=u.length){if(f===u.length)return"";var e=u[f+1];return p(f+1),e}return""}}},t)},z=x,k={ReactTerminal:E,TerminalContextProvider:w};exports.ReactTerminal=E,exports.TerminalContext=z,exports.TerminalContextProvider=w,exports.default=k;
